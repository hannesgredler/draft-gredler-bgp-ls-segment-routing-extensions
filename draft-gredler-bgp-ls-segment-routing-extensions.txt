


Inter-Domain Routing                                     H. Gredler, Ed.
Internet-Draft                                    Juniper Networks, Inc.
Intended status: Standards Track                             S. Ray, Ed.
Expires: August 16, 2014                                      S. Previdi
                                                     Cisco Systems, Inc.
                                                       February 14, 2014

             BGP Link-State extensions for Segment Routing
           draft-gredler-bgp-ls-segment-routing-extensions-00

Abstract

   Segment Routing (SR) allows for a packet to be steered through a
   controlled set of instructions, called "segments", to achieve
   flexible packet forwarding via topological paths as well as services.
   The link-state routing protocols (IS-IS, OSPF and OSPFv3) have been
   extended to advertise the segments.  This draft defines corresponding
   extensions to BGP Link-state address-family to carry the segments via
   BGP.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.


















Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 1]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 16, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (http://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Simplified BSD License text
   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  2
   2.  BGP-LS Extensions for Segment Routing  . . . . . . . . . . . .  4
     2.1.  Node Attribute TLVs  . . . . . . . . . . . . . . . . . . .  5
     2.2.  Link Attribute TLVs  . . . . . . . . . . . . . . . . . . .  5
     2.3.  Prefix Attribute TLVs  . . . . . . . . . . . . . . . . . .  6
   3.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  6
   4.  Manageability Considerations . . . . . . . . . . . . . . . . .  6
     4.1.  Operational Considerations . . . . . . . . . . . . . . . .  6
       4.1.1.  Operations . . . . . . . . . . . . . . . . . . . . . .  6
   5.  TLV/Sub-TLV Code Points Summary  . . . . . . . . . . . . . . .  6
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . .  7
   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  7
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  7
     8.1.  Normative References . . . . . . . . . . . . . . . . . . .  7
     8.2.  Informative References . . . . . . . . . . . . . . . . . .  8
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  8

1.  Introduction

   Segment Routing (SR) provides a scalable solution that addresses
   contemporary networks' need for forwarding packets via policy driven
   paths (that may not be the shortest paths) and forwarding via
   "middle-boxes" that provide services (such as a firewall) before
   delivering the packet to the end node.  Segment routing is an
   amalgamation of source routing and MPLS. In Segment Routing, the
   ingress node prepends a sequence of instructions, called "segments",
   to the packet.  The SR capable nodes sequentially execute the
   instructions on the packet to achieve packet forwarding via required
   topological paths as well as services.



Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 2]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


   The segments can be thought of, in a simple way, to represent
   instructions such as "go to node N using the shortest path", "follow
   the shortest path for prefix P", "use link/adjacency L", etc.  Each
   segment is identified by a 32 bit Segment Identifier (SID) (when
   unmodified MPLS data-plane is used, the SIDs are restricted to 20
   bits). There are "global" segments that are known to all SR nodes in
   the local domain, and there are local segments whose semantics are
   known only to the nodes that originate them.  The segment routing
   architecture is described in [I-D.filsfils-rtgwg-segment-routing] and
   segment routing use-cases in [I-D.filsfils-rtgwg-segment-routing-use-
   cases].

   Segment routing is enabled in a network by advertising the segments
   (including the associated SIDs) to the nodes in the network.  The IGP
   link-state routing protocols (IS-IS [I-D.previdi-isis-segment-
   routing-extensions], OSPFv2 [I-D.psenak-ospf-segment-routing-
   extensions] and OSPFv3 [I-D.psenak-ospf-segment-routing-
   ospfv3-extension]) have been extended to advertise the segments.
   Using these extensions, segment routing can be enabled within an IGP
   domain.

                        +------------+
                        | Consumer/  |
                        | Controller |
                        +------------+
                              ^
                              |
                              v
                    +-------------------+
                    |    BGP Speaker    |         +-----------+
                    | (Route-Reflector) |         | Consumer  |
                    +-------------------+         +-----------+
                          ^   ^   ^                       ^
                          |   |   |                       |
          +---------------+   |   +-------------------+   |
          |                   |                       |   |
          v                   v                       v   v
    +-----------+       +-----------+             +-----------+
    |    BGP    |       |    BGP    |             |    BGP    |
    |  Speaker  |       |  Speaker  |    . . .    |  Speaker  |
    +-----------+       +-----------+             +-----------+
          ^                   ^                         ^
          |                   |                         |
         IGP                 IGP                       IGP

   Segment Routing (SR) allows the advertisement of single or multi-hop
   paths.  The flooding scope for the IGP extensions for Segment routing
   is IGP area-wide.  Consequently, the contents of a Link State
   Database (LSDB) or a Traffic Engineering Database (TED) has the scope
   of an IGP area and therefore  by using the IGP alone it is not
   possible to construct segments across an IGP Area or AS boundaries.



Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 3]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


   To address the need for applications that require visibility into
   LSDB across IGP areas, or even across ASes, the BGP-LS address-family
   /sub-address-family have been defined that allows BGP to carry LSDB
   information.  The BGP Network Layer Reachability Information (NLRI)
   encoding format for BGP-LS and a new BGP Path Attribute called BGP-LS
   attribute are defined in [I-D.ietf-idr-ls-distribution].  The
   identifying key of each LSDB object, namely a node, a link or a
   prefix, is encoded in the NLRI and the properties of the object are
   encoded in the BGP-LS attribute.  Figure Figure 1 describes a typical
   deployment scenario.  In each IGP area, one or more nodes are
   configured with BGP-LS. These BGP speakers form an IBGP mesh by
   connecting to one or more route-reflectors.  This way, all BGP
   speakers - specifically the route-reflectors - obtain LSDB
   information from all IGP areas (and from other ASes from EBGP peers).
   An external component connects to the route-reflector to obtain this
   information (perhaps moderated by a policy regarding what information
   is sent to the external component, and what information isn't).

   This document describes extensions to BGP-LS to carry the segments.
   An external component - a Controller - then can collect segment
   information in the "northbound direction" across IGP areas/autonomous
   systems and construct the segment stack that need to be added to an
   incoming packet to achieve the desired end-to-end forwarding.  The
   controller can also use BGP-LS to push the segment stack information
   in the "southbound" direction to program the SR nodes.

2.  BGP-LS Extensions for Segment Routing

   The BGP-LS NLRI can be a node NLRI, a link NLRI or a prefix NLRI. The
   corresponding BGP-LS attribute is a node attribute, a link attribute
   or a prefix attribute.  BGP-LS [I-D.ietf-idr-ls-distribution] defines
   the TLVs that map link-state information to BGP-LS NLRI and BGP-LS
   attribute.  This document adds additional BGP-LS attribute TLVs to
   encode SR information.

   [I-D.previdi-isis-segment-routing-extensions] defines the following
   TLVs to encode SR information.

   o  TLV for Prefix-SID

   o  TLV for Adjacency-SID between two nodes as well as between nodes
      in a LAN

   o  TLV for SID/Label binding

   o  TLV for SR Capabilities

   o  TLV for SR Algorithm

   These TLVs are mapped to BGP-LS attribute TLVs in the following way.




Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 4]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   //                        Value (variable)                     //
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The 2 octet Type field values are defined in the tables Table 1,
   Table 2, and Table 3. The next 2 octet Length field encodes length of
   the rest of the TLV. The Value portion of the TLV is variable and is
   equal to the corresponding Value portion of the TLV defined in [I-D
   .previdi-isis-segment-routing-extensions].

   In each case, multiple TLVs for a given type are allowed to be added.
   The semantics of multiple such values are determined by [I-D.previdi-
   isis-segment-routing-extensions].

2.1.  Node Attribute TLVs

   The following 'Node Attribute' TLVs are defined:

   +-------------+--------------------+------------+-------------------+
   |   TLV Code  | Description        | Length     | IS-IS SR TLV/sub- |
   |    Point    |                    |            |               TLV |
   +-------------+--------------------+------------+-------------------+
   |     1033    | SID/Label Binding  | variable   | 149 (section 2.4) |
   |     1034    | SR Capabilities    | variable   |   2 (section 3.1) |
   |     1035    | SR Algorithm       | variable   |  15 (section 3.2) |
   +-------------+--------------------+------------+-------------------+

   The sections refer to [I-D.previdi-isis-segment-routing-extensions].

   These TLVs can ONLY be added to the Node Attribute associated with
   the Node NLRI that originates the corresponding SR TLV.

2.2.  Link Attribute TLVs

   The following 'Link Attribute' TLVs are are defined:

   +------------+-----------------------+------------+-----------------+
   |  TLV Code  | Description           |     Length |    IS-IS SR TLV |
   |   Point    |                       |            |        /sub-TLV |
   +------------+-----------------------+------------+-----------------+
   |    1099    | Adjacency Segment     |   variable |     31 (section |
   |            | Identifier (Adj-SID)  |            |          2.3.1) |
   |            | TLV                   |            |                 |
   |    1100    | LAN Adjacency Segment |   variable |     32 (section |
   |            | Identifier (Adj-SID)  |            |          2.3.2) |
   |            | TLV                   |            |                 |
   +------------+-----------------------+------------+-----------------+

   The sections refer to [I-D.previdi-isis-segment-routing-extensions].

Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 5]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


   These TLVs can ONLY be added to the Link Attribute associated with
   the link whose local node originates the corresponding SR TLV.

   For a LAN, normally a node only announces its adjacency to the
   pseudo-node.  [I-D.previdi-isis-segment-routing-extensions] allows a
   node to announce adjacency to all other nodes attached to the LAN. In
   such a case, the corresponding BGP-LS link NLRI must be originated
   for each additional link in order to add the SR TLVs to the Link
   Attribute.

2.3.  Prefix Attribute TLVs

   The following 'Prefix Attribute' TLVs are defined:

   +----------------+-------------+----------+----------------------+
   | TLV Code Point | Description |   Length | IS-IS SR TLV/sub-TLV |
   +----------------+-------------+----------+----------------------+
   |      1158      | Prefix SID  | variable | 3 (section 2.2)      |
   +----------------+-------------+----------+----------------------+

   The sections refer to [I-D.previdi-isis-segment-routing-extensions].

3.  IANA Considerations

   This document requests assigning code-points from the registry for
   BGP-LS attribute TLVs based on table Table 4.

   Note to RFC Editor: this section may be removed on publication as an
   RFC.

4.  Manageability Considerations

   This section is structured as recommended in [RFC5706].

4.1.  Operational Considerations

4.1.1.  Operations

   Existing BGP operational procedures apply.  No new operation
   procedures are defined in this document.

5.  TLV/Sub-TLV Code Points Summary

   This section contains the global table of all TLVs/Sub-TLVs defined
   in this document.









Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 6]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


   +-----------+------------------------+------------+-----------------+
   |  TLV Code | Description            |   Length   | IS-IS SR TLV    |
   |   Point   |                        |            | /sub-TLV        |
   +-----------+------------------------+------------+-----------------+
   |    1033   | SID/Label Binding      |  variable  | 149 (section    |
   |           |                        |            | 2.4)            |
   |    1034   | SR Capabilities        |  variable  | 2 (section 3.1) |
   |    1035   | SR Algorithm           |  variable  | 15 (section     |
   |           |                        |            | 3.2)            |
   |    1099   | Adjacency Segment      |  variable  | 31 (section     |
   |           | Identifier (Adj-SID)   |            | 2.3.1)          |
   |           | TLV                    |            |                 |
   |    1100   | LAN Adjacency Segment  |  variable  | 32 (section     |
   |           | Identifier (Adj-SID)   |            | 2.3.2)          |
   |           | TLV                    |            |                 |
   |    1158   | Prefix SID             |  variable  | 3 (section 2.2) |
   +-----------+------------------------+------------+-----------------+

6.  Security Considerations

   Procedures and protocol extensions defined in this document do not
   affect the BGP security model.  See the 'Security Considerations'
   section of [RFC4271] for a discussion of BGP security.  Also refer to
   [RFC4272] and [I-D.ietf-karp-routing-tcp-analysis] for analysis of
   security issues for BGP.

7.  Acknowledgements

   TBD.

8.  References

8.1.  Normative References

   [I-D.ietf-idr-ls-distribution]
              Gredler, H., Medved, J., Previdi, S., Farrel, A. and S.
              Ray, "North-Bound Distribution of Link-State and TE
              Information using BGP", Internet-Draft draft-ietf-idr-ls-
              distribution-04, November 2013.

   [I-D.previdi-isis-segment-routing-extensions]
              Previdi, S., Filsfils, C., Bashandy, A., Gredler, H. and
              S. Litkowski, "IS-IS Extensions for Segment Routing",
              Internet-Draft draft-previdi-isis-segment-routing-
              extensions-04, October 2013.

   [I-D.psenak-ospf-segment-routing-extensions]
              Psenak, P., Previdi, S., Filsfils, C., Gredler, H.,
              Shakir, R. and W. Henderickx, "OSPF Extensions for Segment
              Routing", Internet-Draft draft-psenak-ospf-segment-
              routing-extensions-03, October 2013.

   [I-D.psenak-ospf-segment-routing-ospfv3-extension]

Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 7]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014

              Psenak, P., Previdi, S., Filsfils, C., Gredler, H.,
              Shakir, R. and W. Henderickx, "OSPFv3 Extensions for
              Segment Routing", Internet-Draft draft-psenak-ospf-
              segment-routing-ospfv3-extension-00, October 2013.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4271]  Rekhter, Y., Li, T. and S. Hares, "A Border Gateway
              Protocol 4 (BGP-4)", RFC 4271, January 2006.

   [RFC4272]  Murphy, S., "BGP Security Vulnerabilities Analysis", RFC
              4272, January 2006.

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              May 2008.

8.2.  Informative References

   [I-D.filsfils-rtgwg-segment-routing-use-cases]
              Filsfils, C., Francois, P., Previdi, S., Decraene, B.,
              Litkowski, S., Horneffer, M., Milojevic, I., Shakir, R.,
              Ytti, S., Henderickx, W., Tantsura, J. and E. Crabbe,
              "Segment Routing Use Cases", Internet-Draft draft-
              filsfils-rtgwg-segment-routing-use-cases-01, July 2013.

   [I-D.filsfils-rtgwg-segment-routing]
              Filsfils, C., Previdi, S., Bashandy, A., Decraene, B.,
              Litkowski, S., Horneffer, M., Milojevic, I., Shakir, R.,
              Ytti, S., Henderickx, W., Tantsura, J. and E. Crabbe,
              "Segment Routing Architecture", Internet-Draft draft-
              filsfils-rtgwg-segment-routing-01, October 2013.

   [I-D.ietf-karp-routing-tcp-analysis]
              Jethanandani, M., Patel, K. and L. Zheng, "Analysis of
              BGP, LDP, PCEP and MSDP Issues According to KARP Design
              Guide", Internet-Draft draft-ietf-karp-routing-tcp-
              analysis-07, April 2013.

   [RFC4655]  Farrel, A., Vasseur, J.-P. and J. Ash, "A Path Computation
              Element (PCE)-Based Architecture", RFC 4655, August 2006.

   [RFC5152]  Vasseur, JP., Ayyangar, A. and R. Zhang, "A Per-Domain
              Path Computation Method for Establishing Inter-Domain
              Traffic Engineering (TE) Label Switched Paths (LSPs)", RFC
              5152, February 2008.

   [RFC5706]  Harrington, D., "Guidelines for Considering Operations and
              Management of New Protocols and Protocol Extensions", RFC
              5706, November 2009.

Authors' Addresses


Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 8]

Internet-Draft   BGP LS extensions for Segment Routing     February 2014


   Hannes Gredler, editor
   Juniper Networks, Inc.
   1194 N. Mathilda Ave.
   Sunnyvale, CA 94089
   US
   
   Email: hannes@juniper.net


   Saikat Ray, editor
   Cisco Systems, Inc.
   170, West Tasman Drive
   San Jose, CA 95134
   US
   
   Email: sairay@cisco.com


   Stefano Previdi
   Cisco Systems, Inc.
   Via Del Serafico, 200
   Rome, 00142
   Italy
   
   Email: sprividi@cisco.com




























Gredler, Ray & Previdi  Expires August 16, 2014                 [Page 9]
